<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Isaac Newton Project</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    
    <style>
        body { font-family: 'Poppins', sans-serif; background-color: #f8f9fa; scroll-behavior: smooth; }
        
        /* Navigation */
        .navbar { background-color: #2c3e50; padding: 15px 0; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .navbar-brand { color: #fff !important; font-weight: 700; font-size: 1.5rem; letter-spacing: 1px; }
        
        /* Hero Section (Introduction) */
        .hero-section {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white; padding: 100px 0; text-align: center;
            clip-path: polygon(0 0, 100% 0, 100% 90%, 0 100%);
        }
        .hero-title { font-size: 3.5rem; font-weight: 800; margin-bottom: 20px; }
        .hero-text { font-size: 1.2rem; opacity: 0.9; max-width: 700px; margin: 0 auto 30px auto; }
        
        /* Info Cards (About Project) */
        .info-section { padding: 60px 0; }
        .feature-card {
            background: white; padding: 30px; border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.05); text-align: center;
            height: 100%; transition: transform 0.3s;
        }
        .feature-card:hover { transform: translateY(-10px); }
        .feature-icon { font-size: 3rem; color: #3498db; margin-bottom: 20px; }

        /* The Analyzer Tool Section */
        .tool-section { background-color: #eef2f3; padding: 80px 0; }
        .main-card {
            border: none; border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1); background: #fff; padding: 40px;
        }
        .btn-analyze {
            background-color: #2c3e50; color: white; padding: 15px 40px;
            border-radius: 50px; border: none; font-weight: 600; width: 100%; transition: 0.3s;
        }
        .btn-analyze:hover { background-color: #34495e; transform: scale(1.02); }
        
        /* Footer */
        .footer { background-color: #2c3e50; color: white; padding: 40px 0; margin-top: 0; text-align: center; }
        
        /* Chatbot */
        .chat-icon {
            position: fixed; bottom: 30px; right: 30px;
            background-color: #3498db; color: white;
            width: 60px; height: 60px; border-radius: 50%;
            text-align: center; line-height: 60px; font-size: 30px;
            cursor: pointer; box-shadow: 0 4px 15px rgba(52, 152, 219, 0.4);
            transition: transform 0.3s; z-index: 1000;
        }
        .chat-window {
            position: fixed; bottom: 100px; right: 30px;
            width: 350px; height: 450px; background: white;
            border-radius: 15px; box-shadow: 0 5px 25px rgba(0,0,0,0.2);
            display: none; flex-direction: column; overflow: hidden; z-index: 1000;
        }
        .chat-header { background-color: #3498db; color: white; padding: 15px; font-weight: bold; display: flex; justify-content: space-between; align-items: center; }
        .chat-body { flex: 1; padding: 15px; overflow-y: auto; background-color: #f8f9fa; }
        .chat-footer { padding: 10px; border-top: 1px solid #eee; display: flex; }
        .chat-input { flex: 1; border: 1px solid #ddd; border-radius: 20px; padding: 8px 15px; outline: none; }
        .btn-send { background-color: #2c3e50; color: white; border: none; border-radius: 50%; width: 40px; height: 40px; margin-left: 10px; }
        .msg { margin-bottom: 10px; padding: 8px 12px; border-radius: 15px; max-width: 80%; font-size: 0.9rem; }
        .bot-msg { background-color: #e9ecef; align-self: flex-start; color: #333; }
        .user-msg { background-color: #3498db; color: white; align-self: flex-end; margin-left: auto; }
    </style>
</head>
<body>

    <nav class="navbar navbar-expand-lg sticky-top">
        <div class="container">
            <a class="navbar-brand" href="/"><i class="bi bi-cpu-fill me-2"></i> Isaac Newton</a>
            <div class="ms-auto">
                <a href="#about" class="btn btn-link text-white text-decoration-none">About Project</a>
                <a href="#tool" class="btn btn-link text-white text-decoration-none">Try Analyzer</a>
                <a href="/dashboard" class="btn btn-outline-light btn-sm rounded-pill px-3 ms-2">
                    <i class="bi bi-bar-chart-fill me-1"></i> View Insights
                </a>
            </div>
        </div>
    </nav>

    <header class="hero-section">
        <div class="container">
            <h1 class="hero-title">Intelligent News Categorization</h1>
            <p class="hero-text">
                An advanced NLP system capable of classifying news articles into 
                World, Sports, Business, and Sci/Tech categories with high precision using Machine Learning.
            </p>
            <a href="#tool" class="btn btn-light btn-lg rounded-pill px-5 text-primary fw-bold shadow">Start Analyzing</a>
        </div>
    </header>

    <section id="about" class="info-section">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="fw-bold text-dark">About The System</h2>
                <p class="text-muted">How Isaac Newton Project Works</p>
            </div>
            <div class="row g-4">
                <div class="col-md-4">
                    <div class="feature-card">
                        <i class="bi bi-database-fill-gear feature-icon"></i>
                        <h4>The Dataset</h4>
                        <p class="text-secondary">
                            We utilized the <span class="text-primary fw-bold">AG News Dataset</span>, containing over <span class="text-primary fw-bold">120,000</span> balanced news articles to ensure fair training across all categories.
                        </p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="feature-card">
                        <i class="bi bi-diagram-3-fill feature-icon"></i>
                        <h4>The Algorithm</h4>
                        <p class="text-secondary">
                            The system uses <span class="text-primary fw-bold">TF-IDF</span> for feature extraction and <span class="text-primary fw-bold">Logistic Regression</span>, proving to be efficient and accurate for text classification tasks.
                        </p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="feature-card">
                        <i class="bi bi-lightning-charge-fill feature-icon"></i>
                        <h4>Performance</h4>
                        <p class="text-secondary">
                            Our model achieves an impressive <span class="text-primary fw-bold">91% accuracy</span> on unseen test data, making it reliable for real-world application usage.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="tool" class="tool-section">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="main-card">
                        <h3 class="mb-4 text-center fw-bold text-dark">Try It Yourself</h3>
                        <p class="text-center text-muted mb-4">Paste any news snippet below to see the AI in action.</p>
                        
                        <form action="/predict" method="POST">
                            <div class="mb-4">
                                <textarea class="form-control" name="news_text" rows="6" 
                                placeholder="Example: Apple announced a new iPhone with AI features..." required>{{ original_text }}</textarea>
                            </div>
                            <button type="submit" class="btn btn-analyze">
                                <i class="bi bi-search me-2"></i> Detect Category
                            </button>
                        </form>

                        {% if prediction_text %}
                        <div class="mt-4 text-center p-4 rounded bg-light border border-primary">
                            <h5 class="text-muted">Prediction Result:</h5>
                            <h2 class="text-primary fw-bold">{{ prediction_text }}</h2>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="footer">
        <div class="container">
            <h5 class="fw-bold mb-3">Group: Isaac Newton</h5>
            <p class="small opacity-75">Husam Mohamed â€¢ Waleed Isskandar â€¢ Osaid Ahmed â€¢ Yaseen Mohamed</p>
            <p class="small mt-3">&copy; 2026 UTeM - Faculty of AI & Cyber Security</p>
        </div>
    </footer>

    <style>
        
        .chat-icon {
            position: fixed; bottom: 30px; right: 30px;
            background: linear-gradient(135deg, #2c3e50, #4ca1af);
            color: white;
            width: 60px; height: 60px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 28px; cursor: pointer; 
            box-shadow: 0 8px 25px rgba(44, 62, 80, 0.4);
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 9999;
        }
        .chat-icon:hover { transform: scale(1.1); }
        
        
        .chat-window {
            position: fixed; bottom: 100px; right: 30px;
            width: 360px; height: 500px; background: #fff;
            border-radius: 15px; 
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
            display: none; flex-direction: column; overflow: hidden; 
            z-index: 9999; font-family: 'Poppins', sans-serif;
            border: 1px solid #f0f0f0;
        }
        
        
        .chat-header {
            background: #2c3e50;
            color: white; padding: 15px 20px; 
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 3px solid #3498db;
        }
        .chat-header h6 { margin: 0; font-weight: 600; font-size: 0.95rem; }
        .status-indicator { width: 8px; height: 8px; background: #2ecc71; border-radius: 50%; display: inline-block; margin-right: 6px; }

        
        .chat-body { 
            flex: 1; padding: 15px; overflow-y: auto; 
            background-color: #f8f9fa;
            display: flex; flex-direction: column; gap: 12px;
        }
        
        
        .msg { padding: 10px 14px; border-radius: 12px; font-size: 0.9rem; line-height: 1.5; max-width: 85%; position: relative; }
        .bot-msg { 
            background-color: #fff; color: #444; 
            border-bottom-left-radius: 2px; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.05); 
            align-self: flex-start; border: 1px solid #eee;
        }
        .user-msg { 
            background-color: #3498db; color: white; 
            border-bottom-right-radius: 2px; 
            align-self: flex-end; 
            box-shadow: 0 2px 5px rgba(52, 152, 219, 0.3);
        }

        
        .typing { display: none; align-self: flex-start; margin-left: 5px; margin-bottom: 5px; }
        .dot { height: 6px; width: 6px; background-color: #aaa; border-radius: 50%; display: inline-block; animation: bounce 1.4s infinite ease-in-out both; margin: 0 1px; }
        .dot:nth-child(1) { animation-delay: -0.32s; }
        .dot:nth-child(2) { animation-delay: -0.16s; }
        @keyframes bounce { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1); } }

        .suggestions { 
            display: flex; 
            flex-wrap: wrap; 
            gap: 8px; 
            padding: 10px 15px; 
            background: #fff;
            border-top: 1px solid #f0f0f0;
            justify-content: center; 
        }
        .chip {
            background: #f1f3f5; color: #495057; 
            padding: 6px 12px; border-radius: 20px;
            font-size: 0.8rem; cursor: pointer; 
            border: 1px solid #e9ecef; transition: all 0.2s;
            font-weight: 500;
        }
        .chip:hover { 
            background: #3498db; color: white; 
            border-color: #3498db; transform: translateY(-1px);
        }
        .chip i { margin-right: 4px; } 


        .chat-footer { padding: 12px; background: white; display: flex; align-items: center; gap: 8px; }
        .chat-input { 
            flex: 1; border: 1px solid #e0e0e0; border-radius: 25px; 
            padding: 10px 15px; outline: none; font-size: 0.9rem; background: #fdfdfd; 
        }
        .chat-input:focus { border-color: #3498db; background: #fff; }
        .btn-send { 
            background: #3498db; color: white; border: none; 
            border-radius: 50%; width: 40px; height: 40px; 
            display: flex; align-items: center; justify-content: center; 
            transition: 0.2s; box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .btn-send:hover { background: #2980b9; transform: scale(1.05); }
    </style>

    <div class="chat-icon" onclick="toggleChat()">
        <i class="bi bi-chat-dots-fill"></i>
    </div>

    <div class="chat-window" id="chatWindow">
        <div class="chat-header">
            <div>
                <span class="online-dot"></span>
                <span>Isaac AI Assistant</span>
            </div>
            <i class="bi bi-x-lg" style="cursor: pointer; opacity: 0.8;" onclick="toggleChat()"></i>
        </div>

        <div class="chat-body" id="chatBody">
            <div class="msg bot-msg">
                Hello! ðŸ‘‹ I am Isaac. How can I help you today?
            </div>
        </div>

        <div class="typing" id="typingIndicator" style="margin-left: 20px;">
            <span class="dot"></span><span class="dot"></span><span class="dot"></span>
        </div>

        <div class="suggestions">
            <div class="chip" onclick="sendQuickMsg('Who is the team?')"><i class="bi bi-people-fill"></i> Team</div>
            <div class="chip" onclick="sendQuickMsg('Accuracy?')"><i class="bi bi-bullseye"></i> Accuracy</div>
            <div class="chip" onclick="sendQuickMsg('Show Dashboard')"><i class="bi bi-bar-chart-line-fill"></i> Dashboard</div>
            <div class="chip" onclick="sendQuickMsg('How does it work?')"><i class="bi bi-gear-fill"></i> Algorithm</div>
        
        </div>

        <div class="chat-footer">
            <input type="text" class="chat-input" id="userInput" placeholder="Type a message..." onkeypress="handleEnter(event)">
            <button class="btn-send" onclick="sendMessage()"><i class="bi bi-send-fill"></i></button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function toggleChat() {
            var chat = document.getElementById('chatWindow');
            chat.style.display = chat.style.display === 'flex' ? 'none' : 'flex';
        }

        function handleEnter(e) { if (e.key === 'Enter') sendMessage(); }

        function sendQuickMsg(msg) {
            document.getElementById('userInput').value = msg;
            sendMessage();
        }

        function sendMessage() {
            var input = document.getElementById('userInput');
            var msg = input.value;
            if (!msg) return;

            // 1. Add User Message
            var chatBody = document.getElementById('chatBody');
            chatBody.innerHTML += `<div class="msg user-msg">${msg}</div>`;
            input.value = '';
            chatBody.scrollTop = chatBody.scrollHeight;

            // 2. Show Typing Indicator
            var typing = document.getElementById('typingIndicator');
            typing.style.display = 'block';
            chatBody.scrollTop = chatBody.scrollHeight;

            // 3. Fake Delay & Fetch Response
            setTimeout(() => {
                fetch('/chat', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                    body: 'msg=' + encodeURIComponent(msg)
                })
                .then(response => response.json())
                .then(data => {
                    // Hide Typing
                    typing.style.display = 'none';
                    
                    // Show Bot Response
                    // Note: We use innerHTML to allow links (<a> tags) to work
                    chatBody.innerHTML += `<div class="msg bot-msg">${data.response}</div>`;
                    chatBody.scrollTop = chatBody.scrollHeight;
                });
            }, 800); // 800ms delay to simulate "thinking"
        }
    </script>
</body>
</html>